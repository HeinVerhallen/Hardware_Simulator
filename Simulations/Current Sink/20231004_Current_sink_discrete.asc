Version 4
SHEET 1 2380 1076
WIRE -752 -240 -1008 -240
WIRE -656 -240 -656 -256
WIRE -656 -240 -752 -240
WIRE -560 -240 -656 -240
WIRE -656 -192 -688 -192
WIRE -624 -192 -656 -192
WIRE -656 -144 -656 -192
WIRE -656 -144 -752 -144
WIRE -560 -112 -560 -144
WIRE -752 -64 -752 -144
WIRE -560 -64 -560 -112
WIRE -752 -16 -752 -64
WIRE -560 -16 -560 -64
WIRE -832 32 -832 -64
WIRE -832 32 -848 32
WIRE -816 32 -832 32
WIRE -480 32 -480 -64
WIRE -480 32 -496 32
WIRE -464 32 -480 32
WIRE -352 32 -384 32
WIRE -1008 80 -1008 -240
WIRE 1024 80 752 80
WIRE 80 96 80 64
WIRE 1024 144 1024 80
WIRE -656 160 -752 160
WIRE -560 160 -656 160
WIRE 448 160 416 160
WIRE 560 160 448 160
WIRE 752 160 640 160
WIRE -1008 176 -1008 160
WIRE -912 176 -1008 176
WIRE -656 176 -656 160
WIRE 320 176 288 176
WIRE 352 176 320 176
WIRE -912 224 -912 176
WIRE -912 224 -944 224
WIRE -720 224 -912 224
WIRE 1024 240 1024 224
WIRE 1024 240 752 240
WIRE 752 256 752 240
WIRE -656 272 -1008 272
WIRE -656 288 -656 272
WIRE 448 320 416 320
WIRE 560 320 448 320
WIRE 768 320 640 320
WIRE 80 432 80 192
WIRE 768 432 768 320
WIRE 768 432 80 432
FLAG 80 512 0
FLAG 80 64 VSINK
FLAG -656 -256 +9V
FLAG 1392 208 0
FLAG 1600 208 0
FLAG 1392 128 VSINK
FLAG 1600 128 SP
FLAG 1232 208 0
FLAG 1232 128 +5V
FLAG 448 320 IN-
FLAG 752 256 0
FLAG 752 0 +5V
FLAG 1488 208 0
FLAG -656 288 0
FLAG 448 160 IN+
FLAG 320 176 OUT
FLAG -560 -112 OUT
FLAG -928 32 IN+
FLAG -352 32 IN-
FLAG 1312 208 0
FLAG 1312 128 +9V
DATAFLAG 192 432 "round($/1u)*1u"
DATAFLAG 496 320 "round($/1u)*1u"
DATAFLAG 512 160 "round($/1u)*1u"
DATAFLAG 704 160 "round($/1u)*1u"
SYMBOL res 96 416 M0
SYMATTR InstName R1
SYMATTR Value 5m
SYMBOL voltage 1392 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 2.5
SYMBOL voltage 1600 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(1m .999 0 1u 1u 10m 20m)
SYMBOL voltage 1232 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL res 736 -16 R0
SYMATTR InstName R2
SYMATTR Value 390k
SYMBOL nmos 128 96 M0
SYMATTR InstName M1
SYMATTR Value irfb7545pbf
SYMATTR Prefix X
SYMBOL res 736 64 R0
SYMATTR InstName R3
SYMATTR Value R = 10k*(1-V(SP))
SYMBOL res 736 144 R0
SYMATTR InstName R4
SYMATTR Value R = 10k*V(SP)
SYMBOL res 1008 128 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL voltage 304 176 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName V4
SYMATTR Value ac 1
SYMBOL res 224 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value {Rg}
SYMBOL voltage 1488 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 999m
SYMBOL npn -816 -16 R0
SYMATTR InstName Q1
SYMATTR Value BC847A
SYMBOL npn -496 -16 M0
SYMATTR InstName Q2
SYMATTR Value BC847A
SYMBOL res -768 64 R0
SYMATTR InstName R9
SYMATTR Value 33
SYMBOL res -576 64 R0
SYMATTR InstName R10
SYMATTR Value 33
SYMBOL res -832 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 2k2
SYMBOL res -368 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 2k2
SYMBOL res -736 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 2k2
SYMBOL res -464 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 2k2
SYMBOL voltage 1312 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 9
SYMBOL pnp -688 -144 R180
SYMATTR InstName Q3
SYMATTR Value BC857A
SYMBOL pnp -624 -144 M180
SYMATTR InstName Q4
SYMATTR Value BC857A
SYMBOL npn -944 176 M0
SYMATTR InstName Q5
SYMATTR Value BC847A
SYMBOL npn -720 176 R0
SYMATTR InstName Q6
SYMATTR Value BC847A
SYMBOL res -1024 64 R0
SYMATTR InstName R7
SYMATTR Value 1k8
SYMBOL voltage 544 160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value 2
SYMBOL voltage 544 320 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 2
TEXT 776 328 Left 2 !.tran 0 100m 0 10u startup uic
TEXT 120 488 Left 2 !.include irfb7545pbf.txt
TEXT 848 16 Left 2 ;R5 emulates digital\npotentiometer in parallel
TEXT 774 356 Left 2 ;.ac dec 100 10k 10MEG
TEXT 120 520 Left 2 !.step param Rg list 1k 4k7 10k
TEXT 776 304 Left 2 !.op
TEXT 592 -88 VRight 2 ;Voltage shifters
