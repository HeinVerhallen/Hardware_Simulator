Version 4
SHEET 1 1784 680
WIRE 560 48 560 32
WIRE 848 48 560 48
WIRE 848 144 848 48
WIRE 496 160 416 160
WIRE 560 160 560 128
WIRE 560 160 496 160
WIRE 128 176 48 176
WIRE 288 176 208 176
WIRE 352 176 288 176
WIRE 464 192 416 192
WIRE 496 208 496 160
WIRE 560 208 560 160
WIRE 0 288 0 192
WIRE 304 288 0 288
WIRE 464 288 464 192
WIRE 464 288 304 288
WIRE 0 304 0 288
WIRE 496 304 496 272
WIRE 560 304 560 288
WIRE 560 304 496 304
WIRE 848 304 848 224
WIRE 848 304 560 304
WIRE 560 320 560 304
FLAG 0 384 0
FLAG 0 96 VBMS
FLAG 384 208 Vcc
FLAG 384 144 0
FLAG 1200 240 0
FLAG 1328 240 0
FLAG 1200 160 VBMS
FLAG 1328 160 SP
FLAG 1104 240 0
FLAG 1104 160 Vcc
FLAG 304 288 opamp-
FLAG 288 176 opamp-out
FLAG 560 320 0
FLAG 560 -48 Vcc
SYMBOL res 16 288 M0
SYMATTR InstName R1
SYMATTR Value 5m
SYMBOL voltage 1200 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 2.5
SYMBOL voltage 1328 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(1m .999 0 10m 7m 10m 20m)
SYMBOL voltage 1104 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL res 544 -64 R0
SYMATTR InstName R2
SYMATTR Value 390k
SYMBOL nmos 48 96 M0
SYMATTR InstName M1
SYMATTR Value irfb7545pbf
SYMATTR Prefix X
SYMBOL res 544 32 R0
SYMATTR InstName R3
SYMATTR Value R = 10k*(1-V(SP))
SYMBOL res 544 192 R0
SYMATTR InstName R4
SYMATTR Value R = 10k*V(SP)
SYMBOL Opamps\\LT6220 384 176 R180
SYMATTR InstName U1
SYMBOL res 832 128 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL cap 480 208 R0
SYMATTR InstName C1
SYMATTR Value 10n
SYMBOL voltage 224 176 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName V4
SYMATTR Value ac 1
TEXT 48 432 Left 2 !.tran 0 100m 0 10u startup uic
TEXT 48 456 Left 2 !.include irfb7545pbf.txt
TEXT 48 480 Left 2 !.include TL081.txt
TEXT 48 504 Left 2 !.include MCP6001.txt
TEXT 672 16 Left 2 ;digital potentiometer in parallel
