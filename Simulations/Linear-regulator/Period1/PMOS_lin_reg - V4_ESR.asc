Version 4
SHEET 1 4944 2476
WIRE 816 -2144 688 -2144
WIRE 1120 -2144 816 -2144
WIRE 1168 -2144 1120 -2144
WIRE 1280 -2144 1248 -2144
WIRE 1488 -2144 1376 -2144
WIRE 1648 -2144 1488 -2144
WIRE 1696 -2144 1648 -2144
WIRE 1792 -2144 1696 -2144
WIRE 1808 -2144 1792 -2144
WIRE 1120 -2128 1120 -2144
WIRE 1488 -2112 1488 -2144
WIRE 1696 -2096 1696 -2144
WIRE 1296 -2080 1296 -2096
WIRE 688 -2032 688 -2144
WIRE 1120 -2032 1120 -2048
WIRE 1296 -2032 1296 -2080
WIRE 1296 -2032 1120 -2032
WIRE 1488 -2032 1488 -2048
WIRE 1648 -2032 1648 -2144
WIRE 784 -1920 736 -1920
WIRE 1488 -1920 1488 -1952
WIRE 1488 -1920 784 -1920
WIRE 1648 -1920 1648 -1952
WIRE 1648 -1920 1488 -1920
WIRE 1696 -1920 1696 -2016
WIRE 1792 -1920 1792 -2144
WIRE 816 -1856 816 -2144
WIRE 624 -1840 592 -1840
WIRE 640 -1840 624 -1840
WIRE 784 -1840 768 -1840
WIRE 1136 -1824 848 -1824
WIRE 1152 -1824 1136 -1824
WIRE 1296 -1824 1296 -2032
WIRE 1296 -1824 1232 -1824
WIRE 592 -1808 592 -1840
WIRE 736 -1808 736 -1920
WIRE 784 -1808 736 -1808
WIRE 1648 -1808 1648 -1920
WIRE 688 -1712 688 -1952
WIRE 816 -1712 816 -1792
WIRE 816 -1712 688 -1712
WIRE 1648 -1712 1648 -1728
WIRE 1648 -1712 816 -1712
WIRE 1696 -1712 1696 -1856
WIRE 1696 -1712 1648 -1712
WIRE 1792 -1712 1792 -1840
WIRE 1792 -1712 1696 -1712
WIRE 1808 -1712 1792 -1712
WIRE 592 -1696 592 -1728
FLAG 688 -2144 +VIN
FLAG 592 -1696 0
FLAG 624 -1840 SP
FLAG 1808 -1712 0
FLAG 1808 -2144 +VOUT_MP
FLAG 768 -1840 SP
FLAG 1296 -2080 G
FLAG 1136 -1824 Vfb
FLAG 784 -1920 inp
DATAFLAG 1744 -2144 "round($/1m)*1m"
DATAFLAG 768 -2144 "round($/1m)*1m"
DATAFLAG 1072 -1824 "round($/1m)*1m"
DATAFLAG 1040 -1920 "round($/1m)*1m"
SYMBOL cap 1680 -1920 R0
SYMATTR InstName C11
SYMATTR Value 100µ
SYMATTR SpiceLine Rser=10m
SYMBOL res 1664 -2048 M0
SYMATTR InstName R10
SYMATTR Value 100k
SYMBOL res 1664 -1824 M0
SYMATTR InstName R11
SYMATTR Value 100k
SYMBOL OpAmps\\LT6220 816 -1824 R0
SYMATTR InstName U4
SYMBOL res 1776 -1936 R0
SYMATTR InstName R12
SYMATTR Value 10
SYMBOL pmos 1376 -2096 M270
SYMATTR InstName M1
SYMATTR Value irfp9140n
SYMATTR Prefix X
SYMBOL res 1136 -2144 M0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL cap 1472 -2112 R0
SYMATTR InstName C1
SYMATTR Value 1n
SYMBOL res 1472 -2048 R0
SYMATTR InstName R3
SYMATTR Value 100
SYMBOL res 1264 -2160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL voltage 688 -2048 R0
SYMATTR InstName V1
SYMATTR Value 7.5
SYMBOL voltage 592 -1824 R0
SYMATTR InstName V2
SYMATTR Value {Vsp}
SYMBOL voltage 1248 -1824 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 Invisible 2
WINDOW 123 66 57 VBottom 2
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 0
SYMATTR Value2 AC 1
SYMBOL res 1680 -2112 R0
SYMATTR InstName R4
SYMATTR Value 0.1
TEXT 664 -2416 Left 2 !.OPTIONS nomarch\n.options plotwinsize 0\n.options numdgt 7\n.options maxstep 100u\n; .tran 0 200m 0
TEXT 664 -2264 Left 2 !.ac dec 100 0.1 100MEG
TEXT 664 -2224 Left 2 !.include irfp9140n.txt
TEXT 360 -1664 Left 2 ;https://nl.mouser.com/ProductDetail/Infineon-Technologies/IRFP9140NPBF?qs=9%252BKlkBgLFf2vr%2FSYvxJmQw%3D%3D
TEXT 680 -1504 Left 2 !.meas f_PM WHEN mag(V(vfb)/V(g))=1\n.meas PM FIND V(vfb)/V(g) WHEN mag(V(vfb)/V(g))=1\n \n.meas f_GM WHEN ph(V(vfb)/V(g))=0\n.meas GM FIND V(vfb)/V(g) WHEN ph(V(vfb)/V(g))=0
TEXT 680 -1624 Left 2 !.param Vsp=3
TEXT 680 -1576 Left 2 !.step param Vsp 0.5 3 0.1
